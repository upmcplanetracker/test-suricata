# Suricata + EveBox Docker Compose Setup

This repository provides a simple `docker-compose.yml` file to quickly deploy [Suricata](https://suricata.io/) (an open-source Network Intrusion Detection System) and [EveBox](https://evebox.org/) (a web-based GUI for Suricata events).

Suricata monitors network traffic, and EveBox provides a user-friendly interface to view, filter, and manage the alerts generated by Suricata.

## ‚ö†Ô∏è Important Prerequisites

1.  **Docker & Docker Compose:** You must have Docker and Docker Compose installed on your host machine.
2.  **Network Interface Name:** You **must** know the name of the network interface you want Suricata to monitor (e.g., `eth0`, `eno1`, `enp86s0`).
    * You can find this by running the command `ip a` or `ifconfig` on your host.

---

## üöÄ Setup & Installation

1.  **Clone or Download:** Get the `docker-compose.yml` file from this repository.

4.  **Edit the Configuration:** Before you can run the services, you **must** edit the `docker-compose.yml` file.

    Find this section for the `suricata` service:
    ```yml
    # !!! YOU MUST CHANGE 'enp86s0' to your NUC's interface name !!!
    command: -i enp86s0
    ```
    Change `enp86s0` to the **correct interface name** for your machine.

5.  **Firewall Configuration:** This setup exposes the EveBox web interface on port **`5636`**. You must open this port on your host machine's firewall to access the web UI from other devices.

    For example, if you are using `ufw` (Uncomplicated Firewall) on Ubuntu:
    ```sh
    sudo ufw allow 5636/tcp comment 'EveBox'
    sudo ufw reload
    ```

---

## ‚öôÔ∏è Running the Services

1.  **Start the containers:**
    From the directory containing the `docker-compose.yml` file, run:
    ```sh
    docker compose up -d
    ```
    This will pull the images and start the Suricata and EveBox containers in the background.

2.  **Find EveBox Login Credentials:**
    On the first run, EveBox may generate a default administrator password. You can find this in the container's logs.
    * The default username is: **`admin`**
    * To find the randomly generated password, run:
        ```sh
        docker compose logs
        ```
    * Look for a line in the logs specifying the password.

3.  **Access EveBox:**
    Open your web browser and navigate to:
    **`https://<your-server-ip>:5636`**

    **Note:** You must connect using `https://`. Connecting with `http://` will likely not work. You may need to accept a self-signed certificate warning in your browser.

4.  **Stop the containers:**
    ```sh
    docker compose down
    ```

---

## üîÑ Updating Suricata Rules

The threat landscape changes daily, so you must keep your Suricata rules updated.

### Manual Update (First Time)

After you start the containers for the first time, you should run a manual rule update.

1.  **Run the update command:** This executes the `suricata-update` tool inside the running container. The `-f` (force) flag is good for the first run.
    ```sh
    docker exec suricata_test suricata-update -f
    ```

2.  **Restart Suricata:** To make Suricata load the new rules, you must restart the container.
    ```sh
    docker compose restart suricata
    ```

### Automated Daily Update (Cron Job)

You can automate this process using a cron job on your **host machine** to run daily.

1.  Open the root crontab for editing. (Using `sudo` is important so it has permission to run Docker commands).
    ```sh
    sudo crontab -e
    ```

2.  Add the following line to the file. This example will run the update every day at 3:00 AM.
    ```
    0 3 * * * (cd /path/to/suricata && docker compose exec suricata suricata-update -q && docker compose restart)
    ```

---

## üîî Managing Noisy Alarms in EveBox

You will find that some alerts are very frequent or are "noise" from expected network behavior. You can easily ignore or suppress these alarms directly within EveBox.

1.  In the EveBox UI, go to the **"Alerts"** or **"Events"** view.
2.  Find an alert you want to ignore.
3.  Click the **"-" (minus) button** next to the specific alert signature or rule.
4.  This will add the rule to an "ignored" list, preventing new alerts of that type from cluttering your dashboard.
